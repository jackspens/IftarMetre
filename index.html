<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IftarMetre</title>

<style>
body{
margin:0;
background:linear-gradient(to bottom,#0b0c2a,#000);
color:white;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
text-align:center;
}

h1{
margin:15px 0;
font-size:22px;
}

#topInfo{
display:flex;
justify-content:space-between;
align-items:center;
padding:10px 15px;
}

#gun{
font-size:32px;
font-weight:bold;
color:#00ff7f;
align-items:center;
}

#kalan{
font-size:32px;
font-weight:bold;
color:#ff4d4d;
align-items:center;
}

#clock{
font-size:16px;
margin-bottom:10px;
opacity:0.8;
}

.section{
margin-top:15px;
font-size:18px;
}

.big{
font-size:22px;
font-weight:bold;
margin-top:5px;
}

#iftar{
color:#00ff7f;
font-size:35px;
}

#countdownIftar{
color:#00ff7f;
font-size:20px;
}

#countdownImsak{
color:#ff4d4d;
font-size:20px;
}

select{
margin-top:15px;
width:90%;
max-width:350px;
padding:10px;
font-size:16px;
border-radius:8px;
border:none;
}

h2{
margin-top:25px;
font-size:18px;
}

#ramazanList{
width:95%;
margin:10px auto 30px auto;
text-align:center;
font-size:16px;
}

.dayItem{
padding:8px;
border-bottom:1px solid #222;
}

.passed{
color:#00ff7f;
}

.star{
position:absolute;
width:2px;
height:2px;
background:white;
animation:float 6s infinite linear;
opacity:0.6;
}

@keyframes float{
from{transform:translateY(100vh);}
to{transform:translateY(-10vh);}
}
</style>
</head>
<body>

<h1>ðŸŒ™ IftarMetre</h1>

<div id="topInfo">
<div id="gun"></div>
<div id="kalan"></div>
</div>

<div id="clock"></div>

<div class="section">
<div id="iftar"></div>
<div id="countdownIftar" class="big"></div>
</div>

<div class="section">
<div id="imsak"></div>
<div id="countdownImsak" class="big"></div>
</div>

<select id="citySelect"></select>

<h2>Ramazan GÃ¼nleri</h2>
<div id="ramazanList"></div>

<script>

// SAAT
function updateClock(){
const now=new Date();
document.getElementById("clock").innerText=
now.toLocaleDateString("tr-TR")+" "+now.toLocaleTimeString("tr-TR");
}
setInterval(updateClock,1000);
updateClock();

// RAMAZAN
const ramazanStart=new Date("2026-02-18");
const totalDays=30;
const today=new Date();
let diffDays=Math.floor((today-ramazanStart)/(1000*60*60*24))+1;

if(diffDays>0 && diffDays<=30){
gun.innerText=diffDays+". GÃ¼n Bitti";
kalan.innerText=(30-diffDays)+"GÃ¼n KaldÄ±";
}else{
gun.innerText="Ramazan DÄ±ÅŸÄ±";
kalan.innerText="";
}

// LÄ°STE
for(let i=1;i<=30;i++){
let date=new Date(ramazanStart);
date.setDate(date.getDate()+i-1);

let formatted=date.toLocaleDateString("tr-TR",
{weekday:'long',day:'2-digit',month:'2-digit',year:'numeric'});

let div=document.createElement("div");
div.className="dayItem";

if(i<diffDays){
div.classList.add("passed");
div.innerText=i+" - "+formatted+" âœ”";
}else{
div.innerText=i+" - "+formatted;
}

ramazanList.appendChild(div);
}

// ÅžEHÄ°RLER
const cities=[
"Ä°stanbul","Ã‡anakkale","Ankara","Ä°zmir","Adana","AdÄ±yaman","Afyonkarahisar","AÄŸrÄ±","Aksaray","Amasya",
"Antalya","Ardahan","Artvin","AydÄ±n","BalÄ±kesir","BartÄ±n","Batman",
"Bayburt","Bilecik","BingÃ¶l","Bitlis","Bolu","Burdur","Bursa",
"Ã‡ankÄ±rÄ±","Ã‡orum","Denizli","DiyarbakÄ±r","DÃ¼zce","Edirne","ElazÄ±ÄŸ",
"Erzincan","Erzurum","EskiÅŸehir","Gaziantep","Giresun","GÃ¼mÃ¼ÅŸhane",
"Hakkari","Hatay","IÄŸdÄ±r","Isparta","KahramanmaraÅŸ",
"KarabÃ¼k","Karaman","Kars","Kastamonu","Kayseri","Kilis","KÄ±rÄ±kkale",
"KÄ±rklareli","KÄ±rÅŸehir","Kocaeli","Konya","KÃ¼tahya","Malatya","Manisa",
"Mardin","Mersin","MuÄŸla","MuÅŸ","NevÅŸehir","NiÄŸde","Ordu","Osmaniye",
"Rize","Sakarya","Samsun","Siirt","Sinop","Sivas","ÅžanlÄ±urfa","ÅžÄ±rnak",
"TekirdaÄŸ","Tokat","Trabzon","Tunceli","UÅŸak","Van","Yalova","Yozgat","Zonguldak"

];
let selectedCity=localStorage.getItem("city") || "Ä°stanbul";

cities.forEach(city=>{
let option=document.createElement("option");
option.value=city;
option.textContent=city;
if(city===selectedCity) option.selected=true;
citySelect.appendChild(option);
});

citySelect.addEventListener("change",function(){
localStorage.setItem("city",this.value);
location.reload();
});

// API
fetch(`https://api.aladhan.com/v1/timingsByCity?city=${selectedCity}&country=Turkey&method=13`)
.then(res=>res.json())
.then(data=>{
const t=data.data.timings;

iftar.innerText="Ä°ftar: "+t.Maghrib;
imsak.innerText="Ä°msak: "+t.Fajr;

startCountdown(t.Maghrib,"countdownIftar");
startCountdown(t.Fajr,"countdownImsak");
});

function startCountdown(timeStr,id){
let parts=timeStr.split(":");
let target=new Date();
target.setHours(parts[0]);
target.setMinutes(parts[1]);
target.setSeconds(0);

setInterval(()=>{
let now=new Date();
let t=new Date(target);
if(t<now){t.setDate(t.getDate()+1);}

let diff=t-now;
let h=Math.floor(diff/(1000*60*60));
let m=Math.floor((diff/(1000*60))%60);
let s=Math.floor((diff/1000)%60);

document.getElementById(id).innerText=
h+"s "+m+"d "+s+"sn kaldÄ±";
},1000);
}

// YILDIZ
for(let i=0;i<60;i++){
let star=document.createElement("div");
star.className="star";
star.style.left=Math.random()*100+"vw";
star.style.animationDuration=(4+Math.random()*4)+"s";
document.body.appendChild(star);
}

</script>
</body>
</html>
